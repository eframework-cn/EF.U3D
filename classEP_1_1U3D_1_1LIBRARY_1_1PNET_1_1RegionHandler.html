<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>EFramework: EP.U3D.LIBRARY.PNET.RegionHandler Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="ef-logo.png"/></td>
  <td id="projectalign">
   <div id="projectname">EFramework
   </div>
   <div id="projectbrief">A LITE U3D-BASED FRAMEWORK.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('classEP_1_1U3D_1_1LIBRARY_1_1PNET_1_1RegionHandler.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-attribs">Static Public Attributes</a> &#124;
<a href="#properties">Properties</a> &#124;
<a href="classEP_1_1U3D_1_1LIBRARY_1_1PNET_1_1RegionHandler-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">EP.U3D.LIBRARY.PNET.RegionHandler Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Provides methods to work with <a class="el" href="namespacePhoton.html">Photon</a>'s regions (<a class="el" href="namespacePhoton.html">Photon</a> Cloud) and can be use to find the one with best ping.  
 <a href="classEP_1_1U3D_1_1LIBRARY_1_1PNET_1_1RegionHandler.html#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ae7dad36649f2da958d3e70215667c58d"><td class="memItemLeft" align="right" valign="top"><a id="ae7dad36649f2da958d3e70215667c58d" name="ae7dad36649f2da958d3e70215667c58d"></a>
string&#160;</td><td class="memItemRight" valign="bottom"><b>GetResults</b> ()</td></tr>
<tr class="separator:ae7dad36649f2da958d3e70215667c58d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a20223eca0f88922b8b78204fd150fe2e"><td class="memItemLeft" align="right" valign="top"><a id="a20223eca0f88922b8b78204fd150fe2e" name="a20223eca0f88922b8b78204fd150fe2e"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>SetRegions</b> (OperationResponse opGetRegions)</td></tr>
<tr class="separator:a20223eca0f88922b8b78204fd150fe2e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1fae04fd896a1d91931d6556a7b82ece"><td class="memItemLeft" align="right" valign="top"><a id="a1fae04fd896a1d91931d6556a7b82ece" name="a1fae04fd896a1d91931d6556a7b82ece"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>RegionHandler</b> (ushort masterServerPortOverride=0)</td></tr>
<tr class="separator:a1fae04fd896a1d91931d6556a7b82ece"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac159f023c348eac0fa6cd0d15c3fa1df"><td class="memItemLeft" align="right" valign="top"><a id="ac159f023c348eac0fa6cd0d15c3fa1df" name="ac159f023c348eac0fa6cd0d15c3fa1df"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>PingMinimumOfRegions</b> (Action&lt; <a class="el" href="classEP_1_1U3D_1_1LIBRARY_1_1PNET_1_1RegionHandler.html">RegionHandler</a> &gt; onCompleteCallback, string previousSummary)</td></tr>
<tr class="separator:ac159f023c348eac0fa6cd0d15c3fa1df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a29ab3bd92216da9e650e087955c39923"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classEP_1_1U3D_1_1LIBRARY_1_1PNET_1_1RegionHandler.html#a29ab3bd92216da9e650e087955c39923">Abort</a> ()</td></tr>
<tr class="memdesc:a29ab3bd92216da9e650e087955c39923"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calling this will stop pinging the regions and suppress the onComplete callback.  <br /></td></tr>
<tr class="separator:a29ab3bd92216da9e650e087955c39923"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-attribs" name="pub-static-attribs"></a>
Static Public Attributes</h2></td></tr>
<tr class="memitem:ab7240fad5b6b241b69776399d1263850"><td class="memItemLeft" align="right" valign="top">static Type&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classEP_1_1U3D_1_1LIBRARY_1_1PNET_1_1RegionHandler.html#ab7240fad5b6b241b69776399d1263850">PingImplementation</a></td></tr>
<tr class="memdesc:ab7240fad5b6b241b69776399d1263850"><td class="mdescLeft">&#160;</td><td class="mdescRight">The implementation of PhotonPing to use for region pinging (Best Region detection).  <br /></td></tr>
<tr class="separator:ab7240fad5b6b241b69776399d1263850"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="properties" name="properties"></a>
Properties</h2></td></tr>
<tr class="memitem:ad903798431df55ff6d63500175429a72"><td class="memItemLeft" align="right" valign="top">List&lt; <a class="el" href="classEP_1_1U3D_1_1LIBRARY_1_1PNET_1_1Region.html">Region</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classEP_1_1U3D_1_1LIBRARY_1_1PNET_1_1RegionHandler.html#ad903798431df55ff6d63500175429a72">EnabledRegions</a><code> [get, set]</code></td></tr>
<tr class="memdesc:ad903798431df55ff6d63500175429a72"><td class="mdescLeft">&#160;</td><td class="mdescRight">A list of region names for the <a class="el" href="namespacePhoton.html">Photon</a> Cloud. Set by the result of OpGetRegions().  <br /></td></tr>
<tr class="separator:ad903798431df55ff6d63500175429a72"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ee00ee5e8afa5083692a5c3e1bff400"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classEP_1_1U3D_1_1LIBRARY_1_1PNET_1_1Region.html">Region</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classEP_1_1U3D_1_1LIBRARY_1_1PNET_1_1RegionHandler.html#a4ee00ee5e8afa5083692a5c3e1bff400">BestRegion</a><code> [get]</code></td></tr>
<tr class="memdesc:a4ee00ee5e8afa5083692a5c3e1bff400"><td class="mdescLeft">&#160;</td><td class="mdescRight">When PingMinimumOfRegions was called and completed, the BestRegion is identified by best ping.  <br /></td></tr>
<tr class="separator:a4ee00ee5e8afa5083692a5c3e1bff400"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea917c88c8c928dcdb797ea4851c2eb5"><td class="memItemLeft" align="right" valign="top">string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classEP_1_1U3D_1_1LIBRARY_1_1PNET_1_1RegionHandler.html#aea917c88c8c928dcdb797ea4851c2eb5">SummaryToCache</a><code> [get]</code></td></tr>
<tr class="memdesc:aea917c88c8c928dcdb797ea4851c2eb5"><td class="mdescLeft">&#160;</td><td class="mdescRight">This value summarizes the results of pinging currently available regions (after PingMinimumOfRegions finished).  <br /></td></tr>
<tr class="separator:aea917c88c8c928dcdb797ea4851c2eb5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7966650d1a32f0c243ba6048628c73ce"><td class="memItemLeft" align="right" valign="top"><a id="a7966650d1a32f0c243ba6048628c73ce" name="a7966650d1a32f0c243ba6048628c73ce"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>IsPinging</b><code> [get]</code></td></tr>
<tr class="separator:a7966650d1a32f0c243ba6048628c73ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e03bca47439e048aa92305162169345"><td class="memItemLeft" align="right" valign="top"><a id="a5e03bca47439e048aa92305162169345" name="a5e03bca47439e048aa92305162169345"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>Aborted</b><code> [get]</code></td></tr>
<tr class="separator:a5e03bca47439e048aa92305162169345"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Provides methods to work with <a class="el" href="namespacePhoton.html">Photon</a>'s regions (<a class="el" href="namespacePhoton.html">Photon</a> Cloud) and can be use to find the one with best ping. </p>
<p>When a client uses a Name Server to fetch the list of available regions, the LoadBalancingClient will create a RegionHandler and provide it via the OnRegionListReceived callback, as soon as the list is available. No pings were sent for Best Region selection yet.</p>
<p>Your logic can decide to either connect to one of those regional servers, or it may use PingMinimumOfRegions to test which region provides the best ping. Alternatively the client may be set to connect to the Best Region (lowest ping), one or more regions get pinged. Not all regions will be pinged. As soon as the results are final, the client will connect to the best region, so you can check the ping results when connected to the Master Server.</p>
<p>Regions gets pinged 5 times (RegionPinger.Attempts). Out of those, the worst rtt is discarded and the best will be counted two times for a weighted average.</p>
<p>Usually UDP will be used to ping the Master Servers. In WebGL, WSS is used instead.</p>
<p>It makes sense to make clients "sticky" to a region when one gets selected. This can be achieved by storing the SummaryToCache value, once pinging was done. When the client connects again, the previous SummaryToCache helps limiting the number of regions to ping. In best case, only the previously selected region gets re-pinged and if the current ping is not much worse, this one region is used again. </p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a29ab3bd92216da9e650e087955c39923" name="a29ab3bd92216da9e650e087955c39923"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a29ab3bd92216da9e650e087955c39923">&#9670;&#160;</a></span>Abort()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void EP.U3D.LIBRARY.PNET.RegionHandler.Abort </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Calling this will stop pinging the regions and suppress the onComplete callback. </p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="ab7240fad5b6b241b69776399d1263850" name="ab7240fad5b6b241b69776399d1263850"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab7240fad5b6b241b69776399d1263850">&#9670;&#160;</a></span>PingImplementation</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Type EP.U3D.LIBRARY.PNET.RegionHandler.PingImplementation</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The implementation of PhotonPing to use for region pinging (Best Region detection). </p>
<p>Defaults to null, which means the Type is set automatically.</p>

</div>
</div>
<h2 class="groupheader">Property Documentation</h2>
<a id="a4ee00ee5e8afa5083692a5c3e1bff400" name="a4ee00ee5e8afa5083692a5c3e1bff400"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4ee00ee5e8afa5083692a5c3e1bff400">&#9670;&#160;</a></span>BestRegion</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classEP_1_1U3D_1_1LIBRARY_1_1PNET_1_1Region.html">Region</a> EP.U3D.LIBRARY.PNET.RegionHandler.BestRegion</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">get</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>When PingMinimumOfRegions was called and completed, the BestRegion is identified by best ping. </p>

</div>
</div>
<a id="ad903798431df55ff6d63500175429a72" name="ad903798431df55ff6d63500175429a72"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad903798431df55ff6d63500175429a72">&#9670;&#160;</a></span>EnabledRegions</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">List&lt;<a class="el" href="classEP_1_1U3D_1_1LIBRARY_1_1PNET_1_1Region.html">Region</a>&gt; EP.U3D.LIBRARY.PNET.RegionHandler.EnabledRegions</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">get</span><span class="mlabel">set</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>A list of region names for the <a class="el" href="namespacePhoton.html">Photon</a> Cloud. Set by the result of OpGetRegions(). </p>
<p>Implement ILoadBalancingCallbacks and register for the callbacks to get OnRegionListReceived(RegionHandler regionHandler). You can also put a "case OperationCode.GetRegions:" into your OnOperationResponse method to notice when the result is available. </p>

</div>
</div>
<a id="aea917c88c8c928dcdb797ea4851c2eb5" name="aea917c88c8c928dcdb797ea4851c2eb5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aea917c88c8c928dcdb797ea4851c2eb5">&#9670;&#160;</a></span>SummaryToCache</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">string EP.U3D.LIBRARY.PNET.RegionHandler.SummaryToCache</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">get</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This value summarizes the results of pinging currently available regions (after PingMinimumOfRegions finished). </p>
<p>This value should be stored in the client by the game logic. When connecting again, use it as previous summary to speed up pinging regions and to make the best region sticky for the client. </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespaceEP.html">EP</a></li><li class="navelem"><a class="el" href="namespaceEP_1_1U3D.html">U3D</a></li><li class="navelem"><a class="el" href="namespaceEP_1_1U3D_1_1LIBRARY.html">LIBRARY</a></li><li class="navelem"><a class="el" href="namespaceEP_1_1U3D_1_1LIBRARY_1_1PNET.html">PNET</a></li><li class="navelem"><a class="el" href="classEP_1_1U3D_1_1LIBRARY_1_1PNET_1_1RegionHandler.html">RegionHandler</a></li>
    <li class="footer">Generated on Mon Nov 13 2023 10:38:15 for EFramework by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6 </li>
  </ul>
</div>
</body>
</html>
